import "fortune" as fortune; fortune::side
{"type":"circle","siteId":"302","triplet":[{"type":"site","id":"176","x":526,"y":521},{"type":"site","id":"302","x":530,"y":482},{"type":"site","id":"577","x":591,"y":5}],"center":[10882.33439490446,1563.4830148619958],"radius":10408.671045592559,"x":10882.33439490446,"y":11972.154060454555}
"right"

import "fortune" as fortune; fortune::clip_halfedge([[0, 0], [600, 600]])
{"id":"0/7","leftSiteId":"0","rightSiteId":"7","startPoint":[523.2652152399802,130.9995051954478],"endPoint":[-2252.650501672241,-14982.319397993311],"startInfinite":false,"endInfinite":false}
{"id":"0/7","leftSiteId":"0","rightSiteId":"7","startPoint":[523.2652152399802,130.9995051954478],"endPoint":[499.2040816326531,0],"startInfinite":false,"endInfinite":true}

import "fortune" as fortune; fortune::clip_halfedge([[0, 0], [600, 600]])
{"id":"1/4","leftSiteId":"1","rightSiteId":"4","startPoint":[377.5635528330781,-59.83001531393568],"endPoint":[352.69886317166925,258.59842970475177],"startInfinite":false,"endInfinite":false}
{"id":"1/4","leftSiteId":"1","rightSiteId":"4","startPoint":[372.89168765743074,0],"endPoint":[352.69886317166925,258.59842970475177],"startInfinite":true,"endInfinite":false}

import "fortune" as fortune; fortune::order_halfedges
[{"startPoint":[108.95251396648045,80.41620111731844],"endPoint":[131.92857142857176,0]},{"startPoint":[0,86.70192307692308],"endPoint":[108.95251396648045,80.41620111731844]},{"startPoint":[131.92857142857176,0],"endPoint":[0,0]},{"startPoint":[0,0],"endPoint":[0,86.70192307692308]}]
[{"startPoint":[108.95251396648045,80.41620111731844],"endPoint":[131.92857142857176,0]},{"startPoint":[131.92857142857176,0],"endPoint":[0,0]},{"startPoint":[0,0],"endPoint":[0,86.70192307692308]},{"startPoint":[0,86.70192307692308],"endPoint":[108.95251396648045,80.41620111731844]}]

# Test degenerate cases

# No sites
import "fortune" as fortune; fortune::fortune([[0, 0], [4, 4]])
[]
[]

# Single site
import "fortune" as fortune; fortune::fortune([[0, 0], [4, 4]])
[[1, 2]]
[[[1,2],[4,0],[0,0],[0,4],[4,4]]]

# Square
import "fortune" as fortune; fortune::fortune([[0, 0], [4, 4]])
[[1, 1], [3, 1], [1, 3], [3, 3]]
[[[1,1],[2,2],[2,0],[0,0],[0,2]],[[3,1],[2,0],[2,2],[4,2],[4,0]],[[1,3],[2,2],[0,2],[0,4],[2,4]],[[3,3],[4,2],[2,2],[2,4],[4,4]]]

# Square cells
import "fortune" as fortune; fortune::fortune([[0, 0], [4, 4]])
[[1,1], [2,1], [3,1], [1,2], [2,2], [3,2], [1,3], [2,3], [3,3]]
[[[1,1],[1.5,1.5],[1.5,0],[0,0],[0,1.5]],[[2,1],[1.5,0],[1.5,1.5],[2.5,1.5],[2.5,0]],[[3,1],[2.5,0],[2.5,1.5],[4,1.5],[4,0]],[[1,2],[1.5,1.5],[0,1.5],[0,2.5],[1.5,2.5]],[[2,2],[2.5,1.5],[1.5,1.5],[1.5,2.5],[2.5,2.5]],[[3,2],[4,1.5],[2.5,1.5],[2.5,2.5],[4,2.5]],[[1,3],[1.5,2.5],[0,2.5],[0,4],[1.5,4]],[[2,3],[2.5,2.5],[1.5,2.5],[1.5,4],[2.5,4]],[[3,3],[4,2.5],[2.5,2.5],[2.5,4],[4,4]]]

# Rhombus
import "fortune" as fortune; fortune::fortune([[0, 0], [4, 4]])
[[2, 1], [1, 2], [3, 2], [2, 3]]
[[[2,1],[0,0],[2,2],[4,0]],[[1,2],[2,2],[0,0],[0,4]],[[3,2],[4,0],[2,2],[4,4]],[[2,3],[4,4],[2,2],[0,4]]]

# Horizontal bands
import "fortune" as fortune; fortune::fortune([[0, 0], [6, 6]])
[[3, 1], [3, 2], [3, 3], [3, 4]]
[[[3,1],[0,1.5],[6,1.5],[6,0],[0,0]],[[3,2],[6,1.5],[0,1.5],[0,2.5],[6,2.5]],[[3,3],[6,2.5],[0,2.5],[0,3.5],[6,3.5]],[[3,4],[6,3.5],[0,3.5],[0,6],[6,6]]]

# Vertical bands
import "fortune" as fortune; fortune::fortune([[0, 0], [6, 6]])
[[1, 3], [2, 3], [3, 3], [5, 3]]
[[[1,3],[1.5,6],[1.5,0],[0,0],[0,6]],[[2,3],[1.5,0],[1.5,6],[2.5,6],[2.5,0]],[[3,3],[2.5,0],[2.5,6],[4,6],[4,0]],[[5,3],[4,0],[4,6],[6,6],[6,0]]]

# Points on the circle
import "fortune" as fortune; fortune::fortune([[0, 0], [10, 10]])
[[6.78,2], [1, 5], [8.3,6], [2.2,8], [5,9]]
[[[6.78,2],[2.073391003460206,0],[4.70806358381503,5.07613583815029],[10,3.065199999999999],[10,0]],[[1,5],[4.70806358381503,5.07613583815029],[2.073391003460206,0],[0,0],[0,7.140000000000001],[4.681884057971016,5.267246376811594]],[[8.3,6],[10,3.065199999999999],[4.70806358381503,5.07613583815029],[4.681884057971016,5.267246376811594],[4.716666666666669,5.373333333333335],[8.922727272727274,10],[10,10]],[[2.2,8],[4.681884057971016,5.267246376811594],[0,7.140000000000001],[0,10],[3.064285714285713,10],[4.716666666666669,5.373333333333335]],[[5,9],[8.922727272727274,10],[4.716666666666669,5.373333333333335],[3.064285714285713,10]]]

# Test normal cases
import "fortune" as fortune; fortune::fortune([[0, 0], [10, 10]])
[[3,5], [6,9], [7,8], [2,7]]
[[[3,5],[0,4.75],[4.5,7],[4.785714285714286,6.785714285714286],[9.875000000000005,0],[0,0]],[[6,9],[8,10],[4.785714285714286,6.785714285714286],[4.5,7],[3,10]],[[7,8],[9.875000000000005,0],[4.785714285714286,6.785714285714286],[8,10],[10,10],[10,0]],[[2,7],[4.5,7],[0,4.75],[0,10],[3,10]]]

import "fortune" as fortune; fortune::fortune([[0, 0], [60, 60]])
[[40, 10], [20, 15], [18, 24], [6, 30], [35, 30], [0, 40], [30, 55]]
[[[40,10],[26.875,0],[31.5,18.5],[60,25.625],[60,0]],[[20,15],[31.5,18.5],[26.875,0],[0,0],[0,10.366666666666667],[6.90625,16.8125],[28.40909090909091,21.59090909090909]],[[18,24],[28.40909090909091,21.59090909090909],[6.90625,16.8125],[19.18243243243243,41.36486486486486],[21.785714285714285,40.357142857142854]],[[6,30],[6.90625,16.8125],[0,10.366666666666667],[0,33.2],[17.03846153846154,43.42307692307692],[19.18243243243243,41.36486486486486]],[[35,30],[60,25.625],[31.5,18.5],[28.40909090909091,21.59090909090909],[21.785714285714285,40.357142857142854],[60,48]],[[0,40],[17.03846153846154,43.42307692307692],[0,33.2],[0,60],[8.75,60]],[[30,55],[60,48.000000000000014],[21.785714285714285,40.357142857142854],[19.18243243243243,41.36486486486486],[17.03846153846154,43.42307692307692],[8.75,60],[60,60]]]

import "fortune" as fortune; fortune::fortune([[0, 0], [60, 60]])
[[12, 6], [10, 20], [20, 30], [30, 45], [36, 45], [0, 50], [6, 50]]
[[[12,6],[0,11.428571428571427],[25,15],[60,3.333333333333334],[60,0],[0,0]],[[10,20],[25,15],[0,11.428571428571429],[0,33.333333333333336],[3,34.333333333333336],[5.352941176470588,34.64705882352941]],[[20,30],[25,15],[5.352941176470588,34.64705882352941],[17.024390243902438,42.81707317073171],[33,32.166666666666664],[60,3.366666666666667],[60,3.333333333333334]],[[30,45],[33,32.166666666666664],[17.024390243902438,42.81707317073171],[20.604166666666664,60],[33,60]],[[36,45],[60,3.366666666666668],[33,32.166666666666664],[33,60],[60,60]],[[0,50],[3,34.333333333333336],[0,33.333333333333336],[0,60],[3,60]],[[6,50],[17.024390243902438,42.81707317073171],[5.352941176470588,34.64705882352941],[3,34.333333333333336],[3,60],[20.604166666666664,60]]]

import "fortune" as fortune; fortune::fortune([[0, 0], [60, 60]])
[[30, 7], [18, 20], [14, 28], [32, 34], [52, 46], [2, 50]]
[[[30,7],[9.375,0],[31.54,20.46],[54.75581395348837,18.74031007751938],[60,15.782051282051277],[60,0]],[[18,20],[31.54,20.46],[9.375,0],[0,0],[0,16],[24,28]],[[14,28],[24,28],[0,16],[0,34.6363636363636],[18.435897435897434,44.69230769230769]],[[32,34],[54.75581395348837,18.74031007751938],[31.54,20.46],[24,28],[18.435897435897434,44.69230769230769],[26.6,60],[30,60]],[[52,46],[54.75581395348837,18.74031007751938],[30,60],[60,60],[60,15.782051282051277]],[[2,50],[18.435897435897434,44.69230769230769],[0,34.63636363636364],[0,60],[26.599999999999998,60]]]

import "fortune" as fortune; fortune::fortune([[0, 0], [10, 10]])
[[5, 2], [6, 4], [9, 4], [9, 5]]
[[[5,2],[0,5.75],[7.5,2],[8.5,0],[0,0]],[[6,4],[7.5,2],[0,5.75],[0,10],[5.666666666666667,10],[7.5,4.5]],[[9,4],[8.5,0],[7.5,2],[7.5,4.5],[10,4.5],[10,0]],[[9,5],[10,4.5],[7.5,4.5],[5.666666666666667,10],[10,10]]]

import "fortune" as fortune; fortune::fortune([[0, 0], [100, 100]])
[[13, 50], [23, 50], [18, 60], [30, 70]]
[[[13,50],[18,53.75],[18,0],[0,0],[0,62.75]],[[23,50],[18,0],[18,53.75],[28.852941176470587,59.1764705882353],[100,34.275000000000084],[100,0]],[[18,60],[28.852941176470587,59.1764705882353],[18,53.75],[0,62.75],[0,93.8]],[[30,70],[100,34.275000000000084],[28.852941176470587,59.1764705882353],[0,93.8],[0,100],[100,100]]]
